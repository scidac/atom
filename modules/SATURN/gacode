#%Module
#
# Module file for loading paths for GACODE
#

proc ModulesHelp { } {
        puts stderr "This modulefile sets the environment for GACODE"
        puts stderr ""
        puts stderr "GACODE is the collection of transport and turbulence codes"
        puts stderr "maintained by the theory group at General Atomics, "
        puts stderr "including TGLF, TGYRO, GYRO, NEO, and GLF23."
        puts stderr ""
        puts stderr "The GACODE distribution on SATURN is maintained by"
        puts stderr "Sterling Smith smithsp@fusion.gat.com" 
        puts stderr ""
        puts stderr "The currently compiled version is the unstable branch"
        puts stderr ""
        puts stderr "https://fusion.gat.com/theory/Gyro"
        puts stderr ""
}

conflict gacode

module-whatis gacode

if { ! [ is-loaded pgi ] } {
  module load pgi
}

if { ! [ is-loaded mpi_pgf13 ] } {
  module load mpi_pgf13.2
}

if { ! [ is-loaded netcdf_pgf13.2 ] } {
  module load netcdf
}

set GACODE_ROOT `pwd`/../../gacode

setenv GACODE_ROOT ${GACODE_ROOT}
setenv GACODE_PLATFORM SATURN

prepend-path PATH ${GACODE_ROOT}/tgyro/bin
prepend-path PATH ${GACODE_ROOT}/gyro/bin
prepend-path PATH ${GACODE_ROOT}/cgyro/bin
prepend-path PATH ${GACODE_ROOT}/neo/bin
prepend-path PATH ${GACODE_ROOT}/tglf/bin
prepend-path PATH ${GACODE_ROOT}/glf23/bin
prepend-path PATH ${GACODE_ROOT}/le3/bin
prepend-path PATH ${GACODE_ROOT}/shared/bin
prepend-path PYTHONPATH ${GACODE_ROOT}/python
prepend-path IDL_PATH ${GACODE_ROOT}/gyro/vugyro
